/*
MusicBos_Always_With_Me(센과 치히로의 행방불명 OST: 언제나 몇번이라도)
악보 출처(첫번째 악보)
https://yuri-blog.tistory.com/entry/%ED%94%BC%EC%95%84%EB%85%B8-%EC%95%85%EB%B3%B4%EB%8F%99%EC%98%81%EC%83%81-%EC%84%BC%EA%B3%BC-%EC%B9%98%ED%9E%88%EB%A1%9C%EC%9D%98-%ED%96%89%EB%B0%A9%EB%B6%88%EB%AA%85-%EC%96%B8%EC%A0%9C%EB%82%98-%EB%AA%87-%EB%B2%88%EC%9D%B4%EB%9D%BC%EB%8F%84
*/

#define Buzzer 3
#define LED 4
#define term 4800

const float c1 = 32.7032,   cS1 = 34.6478,   d1 = 36.7081,   dS1 = 38.8909,   e1 = 41.2034,   f1 = 43.6535,   fS1 = 46.2493,   g1 = 48.9994,   gS1 = 51.9131,   a1 = 55.0000,   aS1 = 58.2705,   b1 = 61.7354;
const float c2 = 65.4064 ,  cS2 = 69.2957,   d2 = 73.4162,   dS2 = 77.7817,   e2 = 82.4069,   f2 = 87.3071,   fS2 = 92.4986,   g2 = 97.9989,   gS2 = 103.8262,  a2 = 110.0000,  aS2 = 116.5409,  b2 = 123.4708;
const float c3 = 130.8128,  cS3 = 138.5913,  d3 = 146.8324,  dS3 = 155.5635,  e3 = 164.8138,  f3 = 174.6141,  fS3 = 184.9972,  g3 = 195.9977,  gS3 = 207.6523,  a3 = 220.0000,  aS3 = 233.0819,  b3 = 246.9417;
const float c4 = 261.6256,  cS4 = 277.1826,  d4 = 293.6648,  dS4 = 311.1270,  e4 = 329.6276,  f4 = 349.2282,  fS4 = 369.9944,  g4 = 391.9954,  gS4 = 415.3047,  a4 = 440.0000,  aS4 = 466.1638,  b4 = 493.8833;
const float c5 = 523.2511,  cS5 = 554.3653,  d5 = 587.3295,  dS5 = 622.2540,  e5 = 659.2551,  f5 = 698.4565,  fS5 = 739.9888,  g5 = 783.9909,  gS5 = 830.6094,  a5 = 880.0000,  aS5 = 932.3275,  b5 = 987.7666;
const float c6 = 1046.5023, cS6 = 1108.7305, d6 = 1174.6591, dS6 = 1244.5079, e6 = 1318.5102, f6 = 1396.9129, fS6 = 1479.9777, g6 = 1567.9817, gS6 = 1661.2188, a6 = 1760.0000, aS6 = 1864.6550, b6 = 1975.5332;
const float c7 = 2093.0045, cS7 = 2217.4610, d7 = 2349.3181, dS7 = 2489.0159, e7 = 2637.0205, f7 = 2793.8259, fS7 = 2959.9554, g7 = 3135.9635, gS7 = 3322.4376, a7 = 3520.0000, aS7 = 3729.3101, b7 = 3951.0664;
const float c8 = 4186.0090, cS8 = 4434.9221, d8 = 4698.6363, dS8 = 4978.0317, e8 = 5274.0409, f8 = 5587.6517, fS8 = 5919.9108, g8 = 6271.9270, gS8 = 6644.8752, a8 = 7040.0000, aS8 = 7458.6202, b8 = 7902.1328;

typedef struct _NOTE {
    float melody;
    float tempo;
} NOTE;

const PROGMEM NOTE NoteSong[] = {
    {f2,8},{f4,8},{a4,8},{f2,8},{f4,8},{a4,8},
    {f4,8},{f4,8},{a4,8},{f4,8},{f4,16},{g4,16},
    {a4,16},{f4,16},{c5,16/3},{a4,16},{g4,8},{c5,8},{g4,8},
    {f4,16},{d4,16},{a4,16/3},{f4,16},{e4,4},{e4,8}, //1-1 

    {d4,8},{e4,8},{f4,16},{g4,16},{c4,8},{f4,8},{g4,16},{a4,16},
    {aS4,8},{aS4,16},{a4,16},{g4,16},{f4,16},{g4,4},{f4,16},{g4,16},
    {a4,16},{f4,16},{c5,16/3},{a4,16},{g4,8},{c5,8},{g4,8},
    {f4,16},{d4,16},{d4,8},{e4,16},{f4,16},{c4,4},{c4,16},{c4,16}, //1-2

    {d4,8},{e4,8},{f4,16},{g4,16},{c4,8},{f4,8},{g4,16},{a4,16},
    {aS4,8},{aS4,16},{a4,16},{g4,16},{f4,16},
    {f4,4},{0,8},{a4,16},{aS4,16},
    {c5,8},{c5,8},{c5,8},{c5,8},{c5,16},{d5,16},{c5,16},{aS4,16}, //1-3

    {a4,8},{a4,8},{a4,8},{a4,8},{a4,16},{aS4,16},{a4,16},{g4,16},
    {f4,8},{f4,8},{f4,16},{e4,16},{d4,8},{e4,8},{e4,16},{f4,16},
    {g4,8},{g4,16},{a4,16},{g4,16},{a4,16},{g4,4},{a4,16},{aS4,16},
    {c5,8},{c5,8},{c5,8},{c5,8},{c5,16},{d5,16},{c5,16},{aS4,16}, //1-4

    {a4,8},{a4,8},{a4,8},{a4,16},{aS4,16},{a4,16},{g4,16},{f4,16},{e4,16},
    {d4,8},{d4,16},{e4,16},{f4,16},{g4,16},{c4,8},{f4,8},{g4,16},{a4,16},
    {g4,16/3},{g4,16},{g4,16},{f4,16},{f4,8/3},
    {f2,8},{c3,8},{a4,8},{f2,8},{f3,8},{f5,16},{g5,16}, //2-1

    {a5,16},{f5,16},{c6,16/3},{a5,16},{g5,8},{c6,8},{g5,8},
    {f5,20},{g5,20},{f5,16},{d5,16},{a5,16/3},{f5,16},{e5,4},{f5,16},{e5,16},
    {d5,8},{e5,8},{f5,16},{g5,16},{c5,8},{f5,8},{g5,16},{a5,16},
    {aS5,8},{aS5,16},{a5,16},{g5,16},{f5,16},{g5,4},{f5,16},{g5,16}, //2-2

    {a5,16},{f5,16},{c6,16/3},{a5,16},{g5,8},{c6,8},{g5,8},
    {f5,20},{g5,20},{f5,16},{d5,16},{d5,8},{e5,16},{f5,16},{c5,4},{c5,8},
    {d5,8},{e5,8},{f5,16},{g5,16},{c5,8},{f5,8},{g5,16},{a5,16},
    {aS5,8},{aS5,16},{a5,16},{g5,16},{f5,16},{f5,8/3}, //2-3 

    {f2,8},{c3,8},{a4,8},{f2,8},{f3,8},{a4,16},{aS4,16},
    {c5,16},{c5,16},{c5,8},{c5,16},{c5,32},{d5,32},{c5,16},{aS4,16},
    {a4,16},{a4,16},{a4,8},{a4,16},{a4,32},{aS4,32},{a4,16},{g4,16},
    {f4,16},{f4,16},{f4,16},{e4,16},{d4,8},{e4,16},{e4,32},{f4,32}, //2-4

    {g4,16},{g4,16},{a4,16},{g4,16},{a4,16},{g4,4},{a4,16},{aS4,16},
    {c5,16},{c5,16},{c5,8},{c5,8},{c5,32},{d5,32},{c5,16},{aS4,16},
    {a4,16},{a4,16},{a4,8},{a4,32},{aS4,32},{a4,32},{g4,32},{f4,32},{e4,32},
    {d4,16},{e4,16},{f4,16},{g4,16},{c4,8},{f4,8},{g4,16},{a4,16}, //2-5

    {g4,4},{g4,16},{f4,16},
    {f4,8/3},{f2,16},{c3,16},{f3,16},{g3,16},{a3,16},{c4,16},
    {f2,16},{c3,16},{f3,16},{g3,16},{a3,16},{c4,16},{f4,16},{g4,16},{a4,16},{c5,16},{f5,16},{g5,16},
    {a5,16},{f5,16},{c6,16/3},{a5,16},{g5,8},{c6,8},{g5,8}, //2-6 

    {f5,16},{d5,16},{a5,16/3},{f5,16},{e5,4},{e5,8},
    {d5,8},{e5,8},{f5,16},{g5,16},{c5,8},{f5,8},{g5,16},{a5,16},
    {aS5,8},{aS5,16},{a5,16},{g5,16},{f5,16},{g5,4},{f5,16},{g5,16},
    {a5,16},{f5,16},{c6,16/3},{a5,16},{g5,8},{c6,8},{g5,8}, //3-1

    {f5,20},{g5,20},{f5,16},{d5,16},{d5,8},{e5,16},{f5,16},{c5,8},{c5,16},{c5,16},
    {d5,8},{e5,8},{f5,16},{g5,16},{c5,8},{f5,8},{g5,16},{a5,16},
    {aS5,8},{aS5,16},{a5,16},{g5,16},{f5,16},
    {f5,8/3},{f4,16},{g4,16},{a4,16},{c5,16},{a5,16},{aS5,16}, //3-2

    {c6,8},{c6,8},{c6,8},{c6,8},{c6,16},{d6,16},{c6,16},{aS6,16},
    {a5,8},{a5,8},{a5,8},{a5,8},{a5,16},{aS5,16},{a5,16},{g5,16},
    {f5,8},{f5,8},{f5,16},{e5,16},{d5,8},{e5,8},{e5,16},{f5,16},
    {g5,8},{g5,16},{a5,16},{g5,16},{a5,16},{g5,4},{a5,16},{aS5,16}, //3-3 

    {c6,8},{c6,8},{c6,8},{c6,8},{c6,16},{d6,16},{c6,16},{aS6,16},
    {a5,8},{a5,8},{a5,8},{a5,16},{aS5,16},{a5,16},{g5,16},{f5,16},{e5,16},
    {d5,8},{d5,16},{e5,16},{f5,16},{g5,16},{c5,8},{f5,8},{g5,16},{a5,16},
    {aS5,16/3},{a5,16},{g5,16},{f5,16}, //3-4 

    {f5,8/3},{f4,16},{g4,16},{a4,16},{c5,16},{f5,16},{g5,16},
    {a5,16/3},{c6,16},{f6,16},{f6,16},{c7,4},{f4,16},{g4,16},
    {a4,16},{f4,16},{c5,16/3},{a4,16},{g4,8},{c5,8},{g4,8},
    {f4,8},{a4,16/3},{f4,16},{e4,4},{f4,16},{e4,16}, //3-5 

    {d4,8},{e4,8},{f4,16},{g4,16},{c4,8},{f4,8},{g4,16},{a4,16},
    {aS4,8},{aS4,16},{a4,16},{g4,16},{f4,16},{g4,4},{f4,16},{g4,16},
    {a4,16},{f4,16},{c5,16/3},{a4,16},{g4,8},{c5,8},{g4,8},
    {f4,16},{d4,16},{d4,16},{d4,16},{e4,16},{f4,16},{c4,4},{c4,8}, //3-6 

    {d4,8},{e4,8},{f4,16},{g4,16},{c4,8},{f4,16/3},{e4,16},
    {d4,8},{e4,8},{f4,16},{g4,16},{c4,4},{f4,16},{e4,16},
    {d4,8},{e4,8},{f4,16},{g4,16},{c4,8},{f4,8},{g4,16},{a4,16},
    {aS4,8},{aS4,16},{a4,16},{g4,16},{f4,16}, //4-1 

    {f4,8/3},{f4,16},{g4,16},{a4,16},{c5,16},{f5,16},{a5,16},
    {c7,8/3},{f4,16},{g4,16},{a4,16},{c5,16},{a5,16},{aS5,16},
    {c6,8},{c6,8},{c6,8},{c6,8},{c6,16},{d6,16},{c6,16},{aS5,16}, //4-2

    {a5,8},{a5,8},{a5,8},{a5,8},{a5,16},{aS5,16},{a5,16},{g5,16},
    {f5,8},{f5,8},{f5,16},{e5,16},{d5,8},{e5,8},{e5,16},{f5,16},
    {g5,8},{g5,16},{a5,16},{g5,16},{a5,16},{g5,4},{a5,16},{aS5,16}, //4-3

    {c6,8},{c6,8},{c6,8},{c6,8},{c6,16},{d6,16},{c6,16},{aS5,16},
    {a5,8},{a5,8},{a5,16},{d5,16},{a5,16},{aS5,16},{a5,16},{g5,16},{f5,16},{e5,16},
    {d5,8},{d5,16},{e5,16},{f5,16},{g5,16},{c5,8},{f5,8},{g5,16},{a5,16}, //4-4

    {g5,4},{g5,16},{f5,16},
    {f5,8/3},{f4,16},{g4,16},{a4,16},{c5,16},{f5,16},{a5,16},
    {a5,4},{0,8},{f4,16},{g4,16},{a4,16},{c5,16},{f5,16},{d6,16},
    {f6,2}, //4-5
};

void setup() {
    pinMode(Buzzer, OUTPUT);
    pinMode(LED, OUTPUT);
    digitalWrite(LED,1);

    for(int i = 0; i < sizeof(NoteSong)/sizeof(NoteSong[0]); i++) {
        float pitch = pgm_read_float(&NoteSong[i].melody);
        float beat = term/pgm_read_float(&NoteSong[i].tempo);
        tone(Buzzer, pitch, beat);
        delay(beat*1.1);
    }
};

void loop() {};
